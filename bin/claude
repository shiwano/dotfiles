#!/bin/bash

set -euo pipefail

main() {
	exec mise exec -- cage \
		-allow . \
		-allow /tmp \
		-allow "$HOME/dotfiles/dot.config/claude" \
		-allow "$HOME/.config/claude" \
		-allow "$HOME/.local/share/mise/installs" \
		-allow "$HOME/.npm" \
		-allow "$HOME/.pub-cache" \
		-allow "$HOME/.cargo" \
		-allow "$HOME/Library/Caches/go-build" \
		-allow "$GOPATH/pkg/mod/cache" \
		-allow "$HOMEBREW_PREFIX/Library/Homebrew/cmd/shellenv.sh" \
		-allow "$(git rev-parse --git-common-dir)" \
		claude --mcp-config "$HOME/.mcp-global.json" "$@"
}

main "$@"
