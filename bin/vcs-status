#!/usr/bin/env bash

set -euo pipefail

usage() {
	local fd="${1:-2}"
	cat <<EOF >&"$fd"
Usage: vcs-status [options]

Show the working tree status (Git or jj).

Examples:
  vcs-status
  vcs-status --short
EOF
}

main() {
	if [[ "${1:-}" == "--help" || "${1:-}" == "-h" ]]; then
		usage 1
		return 0
	fi

	if jj root >/dev/null 2>&1; then
		jj status "$@"
	else
		git status "$@"
	fi
}

main "$@"
